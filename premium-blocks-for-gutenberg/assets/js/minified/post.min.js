(()=>{let d={},p={POST_BLOCK:e=>"."+e,POST_INNER_CONTAINER:".premium-blog-wrap",FILTER_ITEMS:".premium-post-grid-taxonomy-filter-list-item",POST_PAGINATION:".premium-blog-pagination-container",CURRENT_PAGE:".page-numbers.current"};function g(e){return e&&new URLSearchParams(window.location.search).get(e)||"*"}function o(e,t){e.length&&(e.forEach(e=>{e.classList.remove("active")}),e=e.find(e=>e.dataset.filter===t))&&e.classList.add("active")}function s(e,t,n,a={},i=!1){var o,s,{ajaxurl:l,blocks:c}=pbgPostGridAjax??{};let{selectors:p,scrollToTop:g}=d[n];if(l&&t&&c[n]&&p){(o=p.postInnerContainer)&&((s=o.querySelector(".pbg-spinner-wrapper"))&&s.remove(),(s=document.createElement("div")).className="pbg-spinner-wrapper",s.innerHTML='<div class="pbg-spinner"></div>',o.appendChild(s));let r=new FormData;r.append("action",e),r.append("nonce",t),r.append("attributes",JSON.stringify(c[n].attributes)),Object.entries(a).forEach(([e,t])=>{r.append(e,t)}),fetch(l,{method:"POST",body:r}).then(e=>{if(e.ok)return e.json();throw new Error(`Server error: ${e.status} `+e.statusText)}).then(r=>{if(r?.success){let{posts_html:e,pagination_html:t}=r.data??{};requestAnimationFrame(()=>{p.postInnerContainer.innerHTML=e,p.postPagination&&(p.postPagination.innerHTML=t),g&&!i&&setTimeout(()=>{p.postBlock?.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},100)})}}).catch(e=>{})}}function l(e,t,r=1,n=!1){var a=(pbgPostGridAjax?.blocks[t]??{}).filter_nonce;a&&s("pbg_filter_posts",a,t,{filter_term:e,page:r},n)}function n(t,r){if(t.target.classList.contains("page-numbers")){t.preventDefault();var n=d[r];if(n){var{selectors:{postPagination:n,filterItems:a},activeFilter:i}=n,t=t.target,n=n.querySelector(p.CURRENT_PAGE);if(t!==n){var o,n=n?parseInt(n.innerHTML):1;let e;e=t.classList.contains("next")?n+1:t.classList.contains("prev")?n-1:parseInt(t.innerHTML.trim()),isNaN(e)||e<1||(a.length&&i&&"*"!==i?l(i,r,e):(n=e,t=r,(a=(pbgPostGridAjax?.blocks[t]??{}).pagination_nonce)&&s("pbg_paginate_posts",a,t,{page:n},o)))}}}}function a(e,t){e.preventDefault();var r,n,a,i,e=e.target.dataset.filter;e&&(r=d[t])&&({selectors:{filterItems:r},activeFilter:a,urlFilterFlag:n}=r,a!==e)&&(n&&(a=e,n=n)&&(i=new URL(window.location),a&&"*"!==a?i.searchParams.set(n,a):i.searchParams.delete(n),window.history.pushState({[n]:a},"",i)),o(r,d[t].activeFilter=e),l(e,t,1))}function e(){{let c=(pbgPostGridAjax??{}).blocks;c&&Object.keys(c).forEach(t=>{var r=document.querySelector(p.POST_BLOCK(t));if(r){var r={postBlock:r,filterItems:Array.from(r.querySelectorAll(p.FILTER_ITEMS)),postInnerContainer:r.querySelector(p.POST_INNER_CONTAINER),postPagination:r.querySelector(p.POST_PAGINATION)},{urlFilterFlag:n,scrollToTop:a,activeFilterTab:i,enableFirstFilter:o}=c[t]?.attributes??{},{filterItems:s,postPagination:l}=r;let e="*";i&&s.length&&!o&&(e=i),n&&s.length&&(o=g(n))&&"*"!==o&&(e=o),d[t]={selectors:r,...s.length||l?{scrollToTop:a}:{},...n&&s.length?{urlFilterFlag:n}:{},...s.length?{activeFilter:e}:{}}}})}0!==Object.keys(d).length&&(Object.keys(d).forEach(t=>{var{filterItems:e,postPagination:r}=d[t].selectors;e.length&&e.forEach(e=>{e.addEventListener("click",e=>a(e,t))}),r&&r.addEventListener("click",e=>n(e,t))}),window.addEventListener("popstate",e=>{let a=e.state;Object.keys(d).forEach(t=>{var{urlFilterFlag:r,selectors:n}=d[t];if(r&&n.filterItems.length){let e="*";e=a&&a[r]?a[r]:g(r),d[t].activeFilter=e,o(n.filterItems,e),l(e,t,1,!0)}})}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e()}):e()})();