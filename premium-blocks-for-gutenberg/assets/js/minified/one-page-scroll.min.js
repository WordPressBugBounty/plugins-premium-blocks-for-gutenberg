window.pbgVerticalScroll=function(n,f){let u=this,h=navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,r=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),v=document.querySelector("."+n),e=v.querySelectorAll(".pbg-one-page-scroll__inner").length,s=v.querySelectorAll(".pbg-one-page-scroll-dot"),i=v.querySelectorAll(".pbg-one-page-scroll-menu-item"),b=v.querySelectorAll(".pbg-one-page-scroll-arrows span"),m={},S=!1,w=!1,y=[],t=null,L=!0;function E(e){return(e=e||window.event).wheelDelta??-e.deltaY??-e.detail}u.init=()=>{if(u.setSectionsData(),S=!!u.getVisibleSection(),t=u.getVisibleSection(),u.scrollHandler(),u.vscrollEffects(),!h&&f.fullSection&&f.fullCheckOverflow&&u.setSectionsOverflow(),s.forEach(e=>{e.addEventListener("click",u.onNavDotChange),e.querySelector(".pbg-one-page-scroll-dot__inner").addEventListener("mouseenter",u.onNavDotEnter),e.querySelector(".pbg-one-page-scroll-dot__inner").addEventListener("mouseleave",u.onNavDotLeave)}),i.forEach(e=>{e.addEventListener("click",u.onNavDotChange)}),b[0]?.addEventListener("click",e=>u.onScroll(e,"up")),b[1]?.addEventListener("click",e=>u.onScroll(e,"down")),f.showTooltipOnScroll){let e=v.querySelector(".pbg-one-page-scroll-dot.active .pbg-one-page-scroll-dot__tooltip");e?.classList.add("pbg-one-page-scroll-dot__tooltip-show"),setTimeout(()=>{e?.classList.remove("pbg-one-page-scroll-dot__tooltip-show")},1e3)}window.addEventListener("resize",u.debounce(50,u.onResize)),window.addEventListener("orientationchange",u.debounce(50,u.onResize)),f.fullSection&&!h||window.addEventListener("scroll",u.scrollHandler),f.fullSection&&!h&&u.fullSectionHandler()},u.setSectionsData=function(){var e=v.querySelectorAll(".pbg-one-page-scroll__inner .premium-one-page-scroll-item");let l=window.innerHeight-f.offset;e.forEach(function(e,o){var o=n+"-"+o,t=(e.id=o,Math.round(e.getBoundingClientRect().top+window.scrollY));m[o]={offset:t},f.enableFitToScreen&&f.fullSection&&!h&&(e.style.minHeight=l+"px")})},u.setSectionsOverflow=function(){Object.keys(m).forEach(function(e){var o=document.getElementById(e),t=v.querySelector(".pbg-one-page-scroll__inner").dataset.animation?o.querySelector("div")?.offsetHeight:o.offsetHeight,l=window.innerHeight-f.offset;if(o.style.setProperty("--pbg-one-page-scroll-overlay-height",t+"px"),l<t){if(!o.querySelector("#scroller-"+e)){var n=document.createElement("div");for(n.id="scroller-"+e;o.firstChild;)n.appendChild(o.firstChild);o.appendChild(n)}t=r?100+l+"px":l+"px";o.querySelector("#scroller-"+e).style.height=t}})},u.fullSectionHandler=function(){e&&(document.addEventListener?window.addEventListener("wheel",u.onScroll,{passive:!1}):document.attachEvent("onmousewheel",u.onScroll),u.keyboardHandler())},u.scrollHandler=function(){var e=document.getElementById(u.getFirstSection(m)),o=document.getElementById(u.getLastSection(m)),e=e.getBoundingClientRect().top,o=o.getBoundingClientRect().top+o.offsetHeight;if(u.getFirstSection(m)===u.getVisibleSection()?b[0]?.classList.add("pbg-one-page-scroll-dots-hide"):b[0]?.classList.remove("pbg-one-page-scroll-dots-hide"),u.getLastSection(m)===u.getVisibleSection()?b[1]?.classList.add("pbg-one-page-scroll-dots-hide"):b[1]?.classList.remove("pbg-one-page-scroll-dots-hide"),o>=window.innerHeight&&e<=f.offset){o=u.getVisibleSection();if(o&&(v.querySelectorAll(".pbg-one-page-scroll-dots, .pbg-one-page-scroll-menu-list, .pbg-one-page-scroll-arrows").forEach(e=>{e.classList.remove("pbg-one-page-scroll-dots-hide")}),w||(s.forEach(e=>{e.classList.remove("active")}),i.forEach(e=>{e.classList.remove("active")}),v.querySelectorAll(`[data-menuanchor="${o}"]`).forEach(e=>{e.classList.add("active")})),o!==t)){t=o,v.querySelectorAll(".pbg-one-page-scroll-dot__tooltip")?.forEach(e=>{e.classList.remove("pbg-one-page-scroll-dot__tooltip-show")});let e=v.querySelector(`.pbg-one-page-scroll-dot[data-menuanchor='${o}'] .pbg-one-page-scroll-dot__tooltip`);e?.classList.add("pbg-one-page-scroll-dot__tooltip-show"),setTimeout(()=>{e?.classList.remove("pbg-one-page-scroll-dot__tooltip-show")},1e3)}}else v.querySelectorAll(".pbg-one-page-scroll-dots, .pbg-one-page-scroll-menu-list, .pbg-one-page-scroll-arrows").forEach(e=>{e.classList.add("pbg-one-page-scroll-dots-hide")}),t=null},u.keyboardHandler=function(){document.addEventListener("keydown",function(e){"ArrowUp"===e.key&&u.onScroll(e,"up"),"ArrowDown"===e.key&&u.onScroll(e,"down")})},u.isScrolled=function(e,o){var t=document.getElementById(e),l=t.querySelector("#scroller-"+e);return!l||("down"===o?u.getFirstSection(m)===e&&Math.floor(t.getBoundingClientRect().top)>f.offset?0<=l.scrollTop:l.scrollTop+l.clientHeight+5>=l.scrollHeight:"up"===o?u.getLastSection(m)===e&&Math.round(t.getBoundingClientRect().top)<0?0<=l.scrollTop:l.scrollTop<=0:void 0)},u.checkNextSection=function(e,o){e=Object.keys(e),o=e.indexOf(o),o=o+=1;return!(o>=e.length)&&e[o]},u.checkPrevSection=function(e,o){var e=Object.keys(e),o=e.indexOf(o),t=--o;return!(o<0)&&e[t]},u.debounce=function(o,t){let l;return function(e){l&&clearTimeout(l),l=setTimeout(function(){t.call(this,e),l=null},o)}},u.getVisibleSection=function(){var e,o=v.querySelectorAll(".pbg-one-page-scroll__inner .premium-one-page-scroll-item"),t=window.innerHeight;let l=null;for(e of o){var n=e,r=Math.ceil(n.getBoundingClientRect().top),s=Math.floor(n.getBoundingClientRect().bottom);if(r<=t&&r>=f.offset||s>f.offset+1&&s<=t||r<=f.offset&&t<=s){l=n.getAttribute("id");break}}return l},u.onNavDotEnter=function(){var e=this.parentElement,e=Array.from(s).indexOf(e);f.tooltips&&f.dotsText[e]&&(document.querySelectorAll(".pbg-one-page-scroll-dot__tooltip")?.forEach(e=>{e.classList.remove("pbp-one-page-scroll-dot__tooltip-show")}),document.querySelectorAll(".pbg-one-page-scroll-dot__tooltip")[e].classList.add("pbg-one-page-scroll-dot__tooltip-show"))},u.onNavDotLeave=function(){document.querySelectorAll(".pbg-one-page-scroll-dot__tooltip")?.forEach(e=>{e.classList.remove("pbg-one-page-scroll-dot__tooltip-show")})},u.onNavDotChange=function(e){let o=this,t=[...o.parentElement.children].indexOf(o),l=o.dataset.menuanchor,n=null;return!o.classList.contains("active")&&!!m.hasOwnProperty(l)&&((n=m[l].offset-f.offset)<0&&(n=m[l].offset),m[u.getVisibleSection()]?.offset!==n)&&void(w||(w=!0,i.forEach(e=>{e.classList.remove("active")}),s.forEach(e=>{e.classList.remove("active")}),(o.classList.contains("pbg-one-page-scroll-menu-item")?s:i)[t]?.classList.add("active"),o.classList.add("active"),l===u.getFirstSection(m)?b[0]?.classList.add("pbg-one-page-scroll-dots-hide"):b[0]?.classList.remove("pbg-one-page-scroll-dots-hide"),l===u.getLastSection(m)?b[1]?.classList.add("pbg-one-page-scroll-dots-hide"):b[1]?.classList.remove("pbg-one-page-scroll-dots-hide"),smoothScroll({yPos:n,duration:f.speed,easing:"swing",complete:function(){w=!1}})))},u.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},u.onAnchorChange=function(e){let o=v.querySelectorAll(`[data-menuanchor="${e}"]`),t=null;if(!m.hasOwnProperty(e))return!1;if((t=m[e].offset-f.offset)<0&&(t=m[e].offset),!w){if(w=!0,L=!1,f.addToHistory&&window.history.pushState(null,null,"#"+e),s.forEach(e=>{e.classList.remove("active")}),i.forEach(e=>{e.classList.remove("active")}),o.forEach(e=>{e.classList.add("active")}),f.showTooltipOnScroll){v.querySelectorAll(".pbg-one-page-scroll-dot__tooltip")?.forEach(e=>{e.classList.remove("pbg-one-page-scroll-dot__tooltip-show")});let e=v.querySelector(".pbg-one-page-scroll-dot.active .pbg-one-page-scroll-dot__tooltip");e?.classList.add("pbg-one-page-scroll-dot__tooltip-show"),setTimeout(()=>{e?.classList.remove("pbg-one-page-scroll-dot__tooltip-show")},1e3)}smoothScroll({yPos:t,duration:f.speed,easing:"swing",complete:function(){w=!1}})}},u.getFirstSection=function(e){return Object.keys(e)[0]},u.getLastSection=function(e){return Object.keys(e)[Object.keys(e).length-1]};let _=(new Date).getTime();u.onScroll=function(e,o){var t=(new Date).getTime(),l=t-_;if(_=t,l>=f.speed&&(L=!0),S&&!h&&u.preventDefault(e),w||Math.abs(E(e))<50&&!L)return u.preventDefault(e),!1;let n=u.getVisibleSection(),r=document.getElementById(n),s=!1,i,c,a=Math.ceil(window.scrollY),d,g,p;if(o)p=o,d="down"===p?100:-100;else{if(0<(d=E(e))?d+=100:d<0&&(d-=100),0===(g=Math.max(-1,Math.min(1,d))))return;p=g<0?"down":"up"}if(149<y.length&&y.shift(),y.push(Math.abs(d)),300<=l&&(y=[]),n&&m.hasOwnProperty(n)){i=u.checkPrevSection(m,n),c=u.checkNextSection(m,n),s="up"===p?!c&&m[n].offset<a?n:i:!i&&m[n].offset-f.offset>a?n:c;var t=u.getAverage(y,10),o=u.getAverage(y,70)<=t;if(s)S=!0,u.isScrolled(n,p)||h?(s===u.getFirstSection(m)?b[0]?.classList.add("pbg-one-page-scroll-dots-hide"):b[0]?.classList.remove("pbg-one-page-scroll-dots-hide"),s===u.getLastSection(m)?b[1]?.classList.add("pbg-one-page-scroll-dots-hide"):b[1]?.classList.remove("pbg-one-page-scroll-dots-hide"),v.querySelectorAll(".pbg-one-page-scroll-dots, .pbg-one-page-scroll-menu-list, .pbg-one-page-scroll-arrows").forEach(e=>{e.classList.remove("pbg-one-page-scroll-dots-hide")}),o&&!w&&u.onAnchorChange(s)):(l=r.querySelector("#scroller-"+n),"down"===p?(t=e.deltaY??100,l.scrollBy(0,t)):"up"===p&&(o=-(e.deltaY??-100),l.scrollBy(0,-o)));else{t=document.getElementById(n);if(t=v.contains(t)?t:null){l=t.querySelector("#scroller-"+n);if("down"===p){if(l&&l.scrollTop+l.clientHeight+5<l.scrollHeight&&Math.round(t.getBoundingClientRect().top)>=f.offset&&Math.round(t.getBoundingClientRect().top)<=f.offset+1)return o=e.deltaY??100,void l.scrollBy(0,o);Math.floor(t.getBoundingClientRect().top)<=f.offset+1&&(S=!1)}else if("up"===p){if(l&&0!==l.scrollTop&&Math.round(t.getBoundingClientRect().top)>=f.offset&&Math.round(t.getBoundingClientRect().top)<=f.offset+1)return o=-(e.deltaY??-100),void l.scrollBy(0,-o);Math.round(t.getBoundingClientRect().top)>=f.offset&&(S=!1)}}else S=!1;e=document.body.scrollHeight,l=window.innerHeight,o=window.scrollY;e<=o+l||0===o||v.querySelectorAll(".pbg-one-page-scroll-dots, .pbg-one-page-scroll-menu-list, .pbg-one-page-scroll-arrows").forEach(e=>{e.classList.add("pbg-one-page-scroll-dots-hide")})}}else S=!1,v.querySelectorAll(".pbg-one-page-scroll-dots, .pbg-one-page-scroll-menu-list, .pbg-one-page-scroll-arrows").forEach(e=>{e.classList.add("pbg-one-page-scroll-dots-hide")})},u.onResize=function(){u.setSectionsData()},u.getAverage=function(e,o){let t=0;var l=e.slice(Math.max(e.length-o,1));for(let e=0;e<l.length;e++)t+=l[e];return Math.ceil(t/o)},u.vscrollEffects=function(){let i=v.querySelector(".pbg-one-page-scroll__inner").dataset.animation;if(h&&i)v.querySelector(".pbg-one-page-scroll__inner").dataset.animation="default",v.classList.replace("pbg-one-page-scroll-effect-"+i,"pbg-one-page-scroll-effect-default");else if(i){let s=v.querySelectorAll(".pbg-one-page-scroll__inner .premium-one-page-scroll-item");for(var e of s){var o=e;if(!o.querySelector(".animation-wrapper")){var t=document.createElement("div");for(t.classList.add("animation-wrapper"),t.style.boxSizing="border-box";o.firstChild;)t.appendChild(o.firstChild);o.appendChild(t)}}function l(){window.requestAnimationFrame?window.requestAnimationFrame(n):n()}function n(){windowHeight=window.innerHeight;for(var e of s){var o=Math.round(e.getBoundingClientRect().top),o=((e,o,t,l)=>{let n=100,r="0deg";return o<t&&0<=o?(n=100*o/t,"flipcover"===l&&(r=u.getFirstSection(m)!==e?(n=0,100*-o/t+"deg"):"0deg")):1.05*-t<o&&o<t?"parallax"===l?n=u.getLastSection(m)!==e?50*o/t:100*o/t:"flipcover"===l&&(n=u.getLastSection(m)!==e?0:100*o/t):t<=o?(n=100,"flipcover"===l&&(r="-90deg")):o<1.05*-t&&(n=-100),[n,r,1,1,"auto"]})(e.id,o,windowHeight,i);e=e.querySelector("div"),t=o[0],l=o[1],n=o[2],r=o[3],o=o[4],e.style.transform=("flipcover"===i?"perspective(1000px)":"")+"translateY("+t+"vh) rotateX("+l+") scale("+r+")",e.style.opacity=n,e.style.pointerEvents=o}var t,l,n,r}l(),window.addEventListener("scroll",()=>{l()})}}},window.addEventListener("DOMContentLoaded",function(){let l=document.getElementById("wpadminbar")?.offsetHeight??0,n=(PBG_OnePageScroll??{}).blocks;n&&Object.keys(n).map(e=>{var o=n[e].attributes,o={id:e,speed:o.scrollSpeed?1e3*o.scrollSpeed:700,offset:o.scrollOffset&&"default"===o.scrollEffect?o.scrollOffset+l:"default"===o.scrollEffect?l:0,tooltips:o?.enableDotsTooltip&&o?.navDots,dotsText:o?.navDots,showTooltipOnScroll:o?.showTooltipOnScroll,fullSection:!("default"===o.scrollEffect&&!o.fullSectionScroll),fullCheckOverflow:!("default"===o.scrollEffect&&!o.fullSectionScroll),addToHistory:o.saveToBrowser,enableFitToScreen:o.enableFitToScreen};let t=new window.pbgVerticalScroll(e,o);t.init(),setTimeout(()=>{t.setSectionsData()},200)})});