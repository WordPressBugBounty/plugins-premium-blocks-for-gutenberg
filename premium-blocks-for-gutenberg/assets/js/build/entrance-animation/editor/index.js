(()=>{"use strict";const e=window.wp.element,t=window.wp.i18n,n=window.wp.hooks,a=window.wp.compose,l=window.wp.blocks,o=pbg.components,i=e=>e.startsWith("premium/"),r={animation:{Desktop:"",Tablet:"",Mobile:""},duration:"1000",delay:"",curve:"linear"},c=pbg.helpers,s=(e,t)=>{const n=e?.animation;return"none"===n?.[t]?"":n?.[t]&&""!==n?.[t]?n?.[t]||"":"Mobile"===t&&(n?.Tablet||n?.Desktop)||"Tablet"===t&&n?.Desktop||n?.Desktop||""},u=({value:n,onChange:a,deviceType:l})=>{const{animation:i,duration:s,delay:u,curve:b}=n,m=e=>{const t={...n,...e};let l=(0,c.filterEmptyAttributes)(t);l.hasOwnProperty("animation")||(l=r),a(l)};return(0,e.createElement)(o.AdvancedPanel,{title:(0,t.__)("Entrance Animation","premium-blocks-for-gutenberg"),className:"premium-panel-body",panelName:"pbg-animation-general"},(0,e.createElement)(o.PBGAdvancedSelectControl,{value:i,label:(0,t.__)("Animation","premium-blocks-for-gutenberg"),options:[{label:"None",value:"none"},{label:"Fading",options:[{label:"Fade In",value:"pbg-fade-in"},{label:"Fade In Down",value:"pbg-fade-in-down"},{label:"Fade In Left",value:"pbg-fade-in-left"},{label:"Fade In Right",value:"pbg-fade-in-right"},{label:"Fade In Up",value:"pbg-fade-in-up"}]},{label:"Zooming",options:[{label:"Zoom In",value:"pbg-zoom-in"},{label:"Zoom In Down",value:"pbg-zoom-in-down"},{label:"Zoom In Left",value:"pbg-zoom-in-left"},{label:"Zoom In Right",value:"pbg-zoom-in-right"},{label:"Zoom In Up",value:"pbg-zoom-in-up"}]},{label:"Bouncing",options:[{label:"Bounce In",value:"pbg-bounce-in"},{label:"Bounce In Down",value:"pbg-bounce-in-down"},{label:"Bounce In Left",value:"pbg-bounce-in-left"},{label:"Bounce In Right",value:"pbg-bounce-in-right"},{label:"Bounce In Up",value:"pbg-bounce-in-up"}]},{label:"Sliding",options:[{label:"Slide In Down",value:"pbg-slide-in-down"},{label:"Slide In Left",value:"pbg-slide-in-left"},{label:"Slide In Right",value:"pbg-slide-in-right"},{label:"Slide In Up",value:"pbg-slide-in-up"}]},{label:"Rotating",options:[{label:"Rotate In",value:"pbg-rotate-in"},{label:"Rotate In Down Left",value:"pbg-rotate-in-down-left"},{label:"Rotate In Down Right",value:"pbg-rotate-in-down-right"},{label:"Rotate In Up Left",value:"pbg-rotate-in-up-left"},{label:"Rotate In Up Right",value:"pbg-rotate-in-up-right"}]},{label:"Attention Seekers",options:[{label:"Bounce",value:"pbg-bounce"},{label:"Flash",value:"pbg-flash"},{label:"Pulse",value:"pbg-pulse"},{label:"Rubber Band",value:"pbg-rubber-band"},{label:"Shake",value:"pbg-shake"},{label:"Head Shake",value:"pbg-head-shake"},{label:"Swing",value:"pbg-swing"},{label:"Tada",value:"pbg-tada"},{label:"Wobble",value:"pbg-wobble"},{label:"Jello",value:"pbg-jello"}]},{label:"Light Speed",options:[{label:"Light Speed In",value:"pbg-light-speed-in"}]},{label:"Specials",options:[{label:"Roll In",value:"pbg-roll-in"}]}],onChange:e=>m({animation:e})}),i?.[l]&&"none"!==i?.[l]&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(o.PBGSelectControl,{label:(0,t.__)("Easing","premium-blocks-for-gutenberg"),value:b,onChange:e=>m({curve:e}),options:[{value:"ease-in-out",label:"ease-in-out"},{value:"ease",label:"ease"},{value:"ease-in",label:"ease-in"},{value:"ease-out",label:"ease-out"},{value:"linear",label:"linear"}]}),(0,e.createElement)(o.PBGRangeControl,{label:(0,t.__)("Duration","premium-blocks-for-gutenberg"),value:s,onChange:e=>m({duration:e}),defaultValue:1e3,max:1e4,step:1}),(0,e.createElement)(o.PBGRangeControl,{label:(0,t.__)("Delay","premium-blocks-for-gutenberg"),value:u,onChange:e=>m({delay:e}),max:1e4,step:1})))},b=(0,a.createHigherOrderComponent)(t=>n=>{const{attributes:a,setAttributes:l}=n,{entranceAnimation:i={}}=a,r=(0,o.getPreviewDeviceType)();return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,n),(0,e.createElement)(o.PBGAdvancedInspectorControls,null,(0,e.createElement)(u,{value:i,onChange:e=>l({entranceAnimation:e}),deviceType:r})))});(0,n.addFilter)("Pbg.AdvancedTab","pbg/entrance-animation-option",b,10);const m=(0,a.createHigherOrderComponent)(t=>n=>{const{attributes:a,name:l}=n.blockProps,{entranceAnimation:i={},blockId:r}=a,c=(0,o.getPreviewDeviceType)(),u="premium/container"===l?`premium-container-${a.block_id}`:r,b=e=>{e&&(m(e),setTimeout(()=>{e.classList.add(s(i,c))},100),e.style.animationTimingFunction=i.curve,e.style.animationDuration=i.duration?`${i.duration}ms`:"",e.style.animationDelay=i.delay?`${i.delay}ms`:"")},m=e=>{if(e?.classList?.length){[...e.classList].forEach(t=>{t.startsWith("pbg-")&&!t.startsWith("pbg-animation-")&&"pbg-content-wrap"!==t&&e.classList.remove(t)})}};return(0,e.useEffect)(()=>{if(!s(i,c))return;let e=document.querySelector(`.${u} .pbg-content-wrap`),t=null,n=document.querySelector('iframe[name="editor-canvas"]');if(e)b(e);else if(n&&n.contentDocument?.body?.childNodes?.length){const t=n.contentDocument.body;t&&0!==t?.childNodes?.length&&(e=t.querySelector(`.${u} .pbg-content-wrap`),b(e))}else t=setInterval(()=>{if(n=document.querySelector('iframe[name="editor-canvas"]'),n){const a=n.contentDocument.body;a&&0!==a?.childNodes?.length&&(clearInterval(t),e=a.querySelector(`.${u} .pbg-content-wrap`),b(e))}},200)},[i,c]),(0,e.createElement)(t,n)});(0,n.addFilter)("pbg.BlockContent","pbg/entrance-pbg-block-content",m,10);const p=window.wp.blockEditor,d=(0,a.createHigherOrderComponent)(t=>n=>{const a=(0,l.hasBlockSupport)(n.name,"customClassName",!0);if(!PremiumAnimation.allBlocks||i(n.name)||!a)return(0,e.createElement)(t,n);const{attributes:r,setAttributes:c,clientId:b}=n,{entranceAnimation:m={}}=r,d=(0,o.getPreviewDeviceType)(),g=e=>{e&&((e=>{e?.classList?.length&&[...e.classList].forEach(t=>{t.startsWith("pbg-")&&!t.startsWith("pbg-animation-")&&e.classList.remove(t)})})(e),setTimeout(()=>{e.classList.add(s(m,d))},100),e.style.animationTimingFunction=m.curve,e.style.animationDuration=m.duration?`${m.duration}ms`:"",e.style.animationDelay=m.delay?`${m.delay}ms`:"")};return(0,e.useEffect)(()=>{if(!s(m,d))return;let e=document.querySelector(`#block-${b}`),t=null,n=document.querySelector('iframe[name="editor-canvas"]');if(e)g(e);else if(n&&n.contentDocument?.body?.childNodes?.length){const t=n.contentDocument.body;t&&0!==t?.childNodes?.length&&(e=t.querySelector(`#block-${b}`),g(e))}else t=setInterval(()=>{if(n=document.querySelector('iframe[name="editor-canvas"]'),n){const a=n.contentDocument.body;a&&0!==a?.childNodes?.length&&(clearInterval(t),e=a.querySelector(`#block-${b}`),g(e))}},200)},[m,d]),(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t,n),(0,e.createElement)(p.InspectorControls,null,(0,e.createElement)(u,{value:m,deviceType:d,onChange:e=>c({entranceAnimation:e})})))},"EntranceAnimationControl");(0,n.addFilter)("editor.BlockEdit","pbg/entrance-animation-attribute",d);(0,n.addFilter)("blocks.registerBlockType","pbg/entrance-animation-attribute",(e,t)=>PremiumAnimation.allBlocks||i(t)?(void 0!==e.attributes&&(e.attributes={...e.attributes,entranceAnimation:{type:"object",default:r}}),e):e);const g=(0,a.createHigherOrderComponent)(t=>n=>{const{name:a,attributes:r,setAttributes:c,clientId:u}=n,{entranceAnimation:b={},className:m=""}=r,{animation:p}=b,d=(0,o.getPreviewDeviceType)(),g=(0,l.hasBlockSupport)(a,"customClassName",!0),v=PremiumAnimation.allBlocks||i(a),h=(0,e.useMemo)(()=>{const e=u.split("-");return e.length>=5?e[4]:u},[u]),f=(0,e.useMemo)(()=>s(b,d),[b,d]),y=(0,e.useMemo)(()=>m.replace(/pbg-animation-[a-zA-Z0-9]+/g,"").trim(),[m]),w=(0,e.useMemo)(()=>y?`${y} pbg-animation-${h}`:`pbg-animation-${h}`,[y,h]);return(0,e.useEffect)(()=>{if(!v||!g)return void(m!==y&&c({className:y}));if(!p||!f)return void(m!==y&&c({className:y}));const e={};m!==w&&(e.className=w),b.clientId!==h&&(e.entranceAnimation={...b,clientId:h}),Object.keys(e).length>0&&c(e)},[p,f,h,b.clientId,m,w,y,v,g]),(0,e.createElement)(t,n)},"withClientId");(0,n.addFilter)("editor.BlockEdit","pbg/entrance-animation-client-id",g)})();