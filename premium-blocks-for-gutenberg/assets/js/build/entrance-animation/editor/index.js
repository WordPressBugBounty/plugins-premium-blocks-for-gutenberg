(()=>{"use strict";const e=window.wp.i18n,n=window.wp.hooks,t=window.wp.element,a=window.wp.compose,l=window.wp.blocks,o=pbg.components,i=e=>e.startsWith("premium/"),r={animation:{Desktop:"",Tablet:"",Mobile:""},duration:"1000",delay:"",curve:"linear"},s=pbg.helpers,c=window.ReactJSXRuntime,u=(e,n)=>{const t=e?.animation;return"none"===t?.[n]?"":t?.[n]&&""!==t?.[n]?t?.[n]||"":"Mobile"===n&&(t?.Tablet||t?.Desktop)||"Tablet"===n&&t?.Desktop||t?.Desktop||""},b=({value:n,onChange:t,deviceType:a})=>{const{animation:l,duration:i,delay:u,curve:b}=n,d=e=>{const a={...n,...e};let l=(0,s.filterEmptyAttributes)(a);l.hasOwnProperty("animation")||(l=r),t(l)};return(0,c.jsxs)(o.AdvancedPanel,{title:(0,e.__)("Entrance Animation","premium-blocks-for-gutenberg"),className:"premium-panel-body",panelName:"pbg-animation-general",children:[(0,c.jsx)(o.PBGAdvancedSelectControl,{value:l,label:(0,e.__)("Animation","premium-blocks-for-gutenberg"),options:[{label:"None",value:"none"},{label:"Fading",options:[{label:"Fade In",value:"pbg-fade-in"},{label:"Fade In Down",value:"pbg-fade-in-down"},{label:"Fade In Left",value:"pbg-fade-in-left"},{label:"Fade In Right",value:"pbg-fade-in-right"},{label:"Fade In Up",value:"pbg-fade-in-up"}]},{label:"Zooming",options:[{label:"Zoom In",value:"pbg-zoom-in"},{label:"Zoom In Down",value:"pbg-zoom-in-down"},{label:"Zoom In Left",value:"pbg-zoom-in-left"},{label:"Zoom In Right",value:"pbg-zoom-in-right"},{label:"Zoom In Up",value:"pbg-zoom-in-up"}]},{label:"Bouncing",options:[{label:"Bounce In",value:"pbg-bounce-in"},{label:"Bounce In Down",value:"pbg-bounce-in-down"},{label:"Bounce In Left",value:"pbg-bounce-in-left"},{label:"Bounce In Right",value:"pbg-bounce-in-right"},{label:"Bounce In Up",value:"pbg-bounce-in-up"}]},{label:"Sliding",options:[{label:"Slide In Down",value:"pbg-slide-in-down"},{label:"Slide In Left",value:"pbg-slide-in-left"},{label:"Slide In Right",value:"pbg-slide-in-right"},{label:"Slide In Up",value:"pbg-slide-in-up"}]},{label:"Rotating",options:[{label:"Rotate In",value:"pbg-rotate-in"},{label:"Rotate In Down Left",value:"pbg-rotate-in-down-left"},{label:"Rotate In Down Right",value:"pbg-rotate-in-down-right"},{label:"Rotate In Up Left",value:"pbg-rotate-in-up-left"},{label:"Rotate In Up Right",value:"pbg-rotate-in-up-right"}]},{label:"Attention Seekers",options:[{label:"Bounce",value:"pbg-bounce"},{label:"Flash",value:"pbg-flash"},{label:"Pulse",value:"pbg-pulse"},{label:"Rubber Band",value:"pbg-rubber-band"},{label:"Shake",value:"pbg-shake"},{label:"Head Shake",value:"pbg-head-shake"},{label:"Swing",value:"pbg-swing"},{label:"Tada",value:"pbg-tada"},{label:"Wobble",value:"pbg-wobble"},{label:"Jello",value:"pbg-jello"}]},{label:"Light Speed",options:[{label:"Light Speed In",value:"pbg-light-speed-in"}]},{label:"Specials",options:[{label:"Roll In",value:"pbg-roll-in"}]}],onChange:e=>d({animation:e})}),l?.[a]&&"none"!==l?.[a]&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.PBGSelectControl,{label:(0,e.__)("Easing","premium-blocks-for-gutenberg"),value:b,onChange:e=>d({curve:e}),options:[{value:"ease-in-out",label:"ease-in-out"},{value:"ease",label:"ease"},{value:"ease-in",label:"ease-in"},{value:"ease-out",label:"ease-out"},{value:"linear",label:"linear"}]}),(0,c.jsx)(o.PBGRangeControl,{label:(0,e.__)("Duration","premium-blocks-for-gutenberg"),value:i,onChange:e=>d({duration:e}),defaultValue:1e3,max:1e4,step:1}),(0,c.jsx)(o.PBGRangeControl,{label:(0,e.__)("Delay","premium-blocks-for-gutenberg"),value:u,onChange:e=>d({delay:e}),max:1e4,step:1})]})]})},d=(0,a.createHigherOrderComponent)(e=>n=>{const{attributes:a,setAttributes:l}=n,{entranceAnimation:i={}}=a,r=(0,o.getPreviewDeviceType)();return(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(e,{...n}),(0,c.jsx)(o.PBGAdvancedInspectorControls,{children:(0,c.jsx)(b,{value:i,onChange:e=>l({entranceAnimation:e}),deviceType:r})})]})});(0,n.addFilter)("Pbg.AdvancedTab","pbg/entrance-animation-option",d,10);const p=(0,a.createHigherOrderComponent)(e=>n=>{const{attributes:a}=n.blockProps,{entranceAnimation:l={},blockId:i}=a,r=(0,o.getPreviewDeviceType)(),s=e=>{e&&(b(e),setTimeout(()=>{e.classList.add(u(l,r))},100),e.style.animationTimingFunction=l.curve,e.style.animationDuration=l.duration?`${l.duration}ms`:"",e.style.animationDelay=l.delay?`${l.delay}ms`:"")},b=e=>{if(e?.classList?.length){[...e.classList].forEach(n=>{n.startsWith("pbg-")&&!n.startsWith("pbg-animation-")&&"pbg-content-wrap"!==n&&e.classList.remove(n)})}};return(0,t.useEffect)(()=>{if(!u(l,r))return;let e=document.querySelector(`.${i} .pbg-content-wrap`),n=null,t=document.querySelector('iframe[name="editor-canvas"]');if(e)s(e);else if(t&&t.contentDocument?.body?.childNodes?.length){const n=t.contentDocument.body;n&&0!==n?.childNodes?.length&&(e=n.querySelector(`.${i} .pbg-content-wrap`),s(e))}else n=setInterval(()=>{if(t=document.querySelector('iframe[name="editor-canvas"]'),t){const a=t.contentDocument.body;a&&0!==a?.childNodes?.length&&(clearInterval(n),e=a.querySelector(`.${i} .pbg-content-wrap`),s(e))}},200)},[l,r]),(0,c.jsx)(e,{...n})});(0,n.addFilter)("pbg.BlockContent","pbg/entrance-pbg-block-content",p,10);const m=window.wp.blockEditor,g=(0,a.createHigherOrderComponent)(e=>n=>{const a=(0,l.hasBlockSupport)(n.name,"customClassName",!0);if(!PremiumAnimation.allBlocks||i(n.name)||!a)return(0,c.jsx)(e,{...n});const{attributes:r,setAttributes:s,clientId:d}=n,{entranceAnimation:p={}}=r,g=(0,o.getPreviewDeviceType)(),v=e=>{e&&((e=>{e?.classList?.length&&[...e.classList].forEach(n=>{n.startsWith("pbg-")&&!n.startsWith("pbg-animation-")&&e.classList.remove(n)})})(e),setTimeout(()=>{e.classList.add(u(p,g))},100),e.style.animationTimingFunction=p.curve,e.style.animationDuration=p.duration?`${p.duration}ms`:"",e.style.animationDelay=p.delay?`${p.delay}ms`:"")};return(0,t.useEffect)(()=>{if(!u(p,g))return;let e=document.querySelector(`#block-${d}`),n=null,t=document.querySelector('iframe[name="editor-canvas"]');if(e)v(e);else if(t&&t.contentDocument?.body?.childNodes?.length){const n=t.contentDocument.body;n&&0!==n?.childNodes?.length&&(e=n.querySelector(`#block-${d}`),v(e))}else n=setInterval(()=>{if(t=document.querySelector('iframe[name="editor-canvas"]'),t){const a=t.contentDocument.body;a&&0!==a?.childNodes?.length&&(clearInterval(n),e=a.querySelector(`#block-${d}`),v(e))}},200)},[p,g]),(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)(e,{...n}),(0,c.jsx)(m.InspectorControls,{children:(0,c.jsx)(b,{value:p,deviceType:g,onChange:e=>s({entranceAnimation:e})})})]})},"EntranceAnimationControl");(0,n.addFilter)("editor.BlockEdit","pbg/entrance-animation-attribute",g);(0,n.addFilter)("blocks.registerBlockType","pbg/entrance-animation-attribute",(e,n)=>PremiumAnimation.allBlocks||i(n)?(void 0!==e.attributes&&(e.attributes={...e.attributes,entranceAnimation:{type:"object",default:r}}),e):e);const v=(0,a.createHigherOrderComponent)(e=>n=>{const{name:a,attributes:r,setAttributes:s,clientId:b}=n,{entranceAnimation:d={},className:p=""}=r,{animation:m}=d,g=(0,o.getPreviewDeviceType)(),v=(0,l.hasBlockSupport)(a,"customClassName",!0),h=PremiumAnimation.allBlocks||i(a),f=(0,t.useMemo)(()=>{const e=b.split("-");return e.length>=5?e[4]:b},[b]),w=(0,t.useMemo)(()=>u(d,g),[d,g]),y=(0,t.useMemo)(()=>p.replace(/pbg-animation-[a-zA-Z0-9]+/g,"").trim(),[p]),I=(0,t.useMemo)(()=>y?`${y} pbg-animation-${f}`:`pbg-animation-${f}`,[y,f]);return(0,t.useEffect)(()=>{if(!h||!v)return void(p!==y&&s({className:y}));if(!m||!w)return void(p!==y&&s({className:y}));const e={};p!==I&&(e.className=I),d.clientId!==f&&(e.entranceAnimation={...d,clientId:f}),Object.keys(e).length>0&&s(e)},[m,w,f,d.clientId,p,I,y,h,v]),(0,c.jsx)(e,{...n})},"withClientId");(0,n.addFilter)("editor.BlockEdit","pbg/entrance-animation-client-id",v)})();